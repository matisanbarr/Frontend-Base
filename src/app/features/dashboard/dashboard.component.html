<div class="dashboard-layout">
  <!-- Botón hamburguesa solo visible en mobile/tablet -->
  <button
    class="btn btn-primary d-lg-none dashboard-hamburger"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#sidebarOffcanvas"
    aria-controls="sidebarOffcanvas"
    [class.d-none]="!showHamburger"
  >
    <i class="bi bi-list"></i>
  </button>

  <!-- Sidebar fijo en desktop -->
  <div class="d-none d-lg-flex">
    <app-sidebar
      [sidebarCollapsed]="sidebarCollapsed"
      [isAdminGlobal]="isAdminGlobal"
      [adminMenuOpen]="adminMenuOpen"
      [proyectosMenuOpen]="proyectosMenuOpen"
      [getComponentesProyecto]="getComponentesProyecto"
      [isProyectoMenuOpen]="isProyectoMenuOpen"
      (toggleSidebarEvent)="toggleSidebar()"
      (toggleAdminMenuEvent)="toggleAdminMenu()"
      (toggleProyectoMenuEvent)="toggleProyectoMenu($event)"
    ></app-sidebar>
  </div>

  <!-- Offcanvas Sidebar para mobile/tablet -->
  <div
    class="offcanvas offcanvas-start dashboard-offcanvas d-lg-none"
    tabindex="-1"
    id="sidebarOffcanvas"
    aria-labelledby="sidebarOffcanvasLabel"
    (shown.bs.offcanvas)="onOffcanvasShown()"
    (hidden.bs.offcanvas)="onOffcanvasHidden()"
  >
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">Menú</h5>
      <button
        type="button"
        class="btn-close text-reset"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>
    <div class="offcanvas-body p-0">
      <app-sidebar
        [sidebarCollapsed]="false"
        [isAdminGlobal]="isAdminGlobal"
        [adminMenuOpen]="adminMenuOpen"
        [proyectosMenuOpen]="proyectosMenuOpen"
        [getComponentesProyecto]="getComponentesProyecto"
        [isProyectoMenuOpen]="isProyectoMenuOpen"
        (toggleSidebarEvent)="toggleSidebar()"
        (toggleAdminMenuEvent)="toggleAdminMenu()"
        (toggleProyectoMenuEvent)="toggleProyectoMenu($event)"
      ></app-sidebar>
    </div>
  </div>

  <main class="dashboard-content">
    <router-outlet #outlet="outlet"></router-outlet>
    @if (userName !== null && isAdminGlobal !== null) {
      <ng-container *ngIf="!outlet.isActivated">
        <app-home [isAdminGlobal]="isAdminGlobal" [userName]="userName"></app-home>
      </ng-container>
    }
  </main>
</div>
